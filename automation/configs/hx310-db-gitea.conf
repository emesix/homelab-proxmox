# Gitea LXC Configuration for HX310-DB (breintrein)
# Deploy on: pve-hx310-db (192.168.10.12 staging)
# Service: codekroeg (Local Git server)

# Container Identity
export var_ctid="102"                          # CT ID 102 for Gitea
export var_hostname="codekroeg"                # Container hostname

# Resource Allocation
export var_cpu="1"                             # 1 CPU core
export var_ram="2048"                          # 2GB RAM
export var_disk="50"                           # 50GB disk for repositories

# Storage - Use datastore for repository data
export var_storage="local-lvm"                 # Or "datastore/gitea" if dataset exists

# Container Type
export var_unprivileged="1"                    # Unprivileged container works fine

# OS Configuration
export var_os="debian"                         # Debian base
export var_version="12"                        # Debian 12 Bookworm

# Network Configuration - STAGING
export var_brg="vmbr0"                         # Network bridge
export var_net="ip=192.168.10.22/16,gw=192.168.10.1"  # Staging IP

# SSH Access
export var_ssh="yes"                           # Enable SSH

# Advanced Options
export var_verbose="no"                        # Verbose output
export var_tags="git;vcs;development;tier0;breintrein"

# Gitea deployment notes:
# - Binary installation (fast deployment, ~5 minutes)
# - Access via http://192.168.10.22:3000
# - After deployment:
#   1. Complete setup wizard
#   2. Database: PostgreSQL
#      Host: 192.168.10.20:5432
#      User: gitea
#      Password: <from Vaultwarden>
#      Database: gitea
#   3. Create admin account (store in Vaultwarden)
#   4. Mirror GitHub repository:
#      - Repository: https://github.com/<your-username>/Proxmox-Based-Homelab
#      - Set up hourly sync
#   5. SSH available on port 22 for git operations:
#      git clone ssh://git@192.168.10.22:22/homelab/proxmox-homelab.git
